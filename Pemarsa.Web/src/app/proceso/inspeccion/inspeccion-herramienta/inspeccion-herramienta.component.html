<div *ngIf="esListaPieza()">
  <h1 class="col-sm-offset-3">Herramientas inspeccionar</h1>
  <div *ngIf="Proceso" class="form-group">
    <div *ngFor="let indexHerramienta of rangoHerramientasInspeccionar(Proceso.OrdenTrabajo.CantidadInspeccionar);index">

      <div class="form-group row">
        <div class="col-md-3 col-md-offset-3">
          <p class="form-control ">
            {{Proceso.OrdenTrabajo.Herramienta.Nombre}} {{indexHerramienta}}
            
            <i *ngIf="estadoCompleta(indexHerramienta)"class="glyphicon glyphicon-ok pull-right"></i>
            <i *ngIf="!(accion== 'editar' || accion== 'procesar') && !estadoCompleta(indexHerramienta)" routerLink="/inspeccion/entrada/{{Proceso.Guid}}/{{indexHerramienta}}/ver" class="glyphicon glyphicon-eye-open pointer pull-right"></i>
            <i *ngIf="!(accion== 'ver' || accion== 'procesar') && !estadoCompleta(indexHerramienta)" routerLink="/inspeccion/entrada/{{Proceso.Guid}}/{{indexHerramienta}}/editar" class="glyphicon glyphicon-pencil pointer pull-right"></i>
            <i *ngIf="!(accion== 'ver' || accion== 'editar') &&  !estadoCompleta(indexHerramienta)" routerLink="/inspeccion/entrada/{{Proceso.Guid}}/{{indexHerramienta}}/procesar" class="glyphicon glyphicon-wrench pointer pull-right"></i>
          </p>
        </div>
      </div>

    </div>
  </div>
</div>

<div *ngIf="esPiezaUnica()">


  <h2 class="col-md-offset-3 row">{{tipoProcesoActual.Valor}}</h2>

  <div class="form-group row">
    <label class="col-md-3 col-form-label" id="corre">
      Herramienta:
    </label>
    <div class="col-md-3">
      <p class="form-control sin-margen">{{Proceso.OrdenTrabajo.Herramienta.Nombre}} </p>
    </div>
  </div>

  <div class="form-group row">
    <label class="col-md-3 col-form-label" id="corre">
      Cliente:
    </label>
    <div class="col-md-3">
      <p class="form-control sin-margen">{{Proceso.OrdenTrabajo.Cliente.NickName}} </p>
    </div>
  </div>

  <div class="form-group row">
    <label class="col-md-3 col-form-label" id="corre">
      Serial:
    </label>
    <div class="col-md-1">
      <p class="form-control sin-margen">{{Proceso.OrdenTrabajo.SerialHerramienta}} </p>
    </div>

    <label class="col-md-1 col-form-label" id="corre">
      Tamaño:
    </label>
    <div class="col-md-1">
      <p class="form-control sin-margen">{{Proceso.OrdenTrabajo.TamanoHerramienta.Tamano}} </p>
    </div>
  </div>

  <div class="form-group row">
    <label class="col-md-3 col-form-label" id="corre">
      Anexos:
    </label>

    <div class="col-md-3">
      <div *ngFor="let anexo of Proceso.OrdenTrabajo.Anexos">
        <div class="form-group row">
          <div class="col-md-12">
            <a href="{{anexo.DocumentoAdjunto.Ruta}}" class="form-control sin-margen"><p>{{anexo.DocumentoAdjunto.NombreArchivo}}<i class="pull-right glyphicon glyphicon-download"></i></p></a>
          </div>
        </div>
      </div>

    </div>



  </div>

  <div class="form-group row">
    <label class="col-md-3 col-form-label" id="corre">
      Tipos de inspecciones:
    </label>
    <div class="col-md-3">
      <select [attr.disabled]="accion == 'ver' || inspeccionesTerminada ? '' : null" (change)="agregarAInspecccionesSeleccionadas($event)" class="custom-select mr-sm-2 form-control-lg">
        <option>Seleccione</option>
        <option *ngFor="let tipoInspeccion of tiposInspecciones" value="{{tipoInspeccion.Id}}">{{tipoInspeccion.Valor}}</option>
      </select>
    </div>
  </div>


  <div class="form-group row">
    <div class="col-md-3 col-md-offset-3">
      <div *ngFor="let inspeccion of tiposInspeccionesSeleccionadas">
        <div class="form-group row">
          <p class="form-control sin-margen">
            {{inspeccion.Valor}}
            <span *ngIf="(inspeccion.estado=='COMPLETADA')"><i class="glyphicon pull-right glyphicon-lock"></i></span>
            <span *ngIf="!(accion== 'ver' || accion== 'editar') && !(inspeccion.estado=='COMPLETADA')" (click)="quitarDeLaListaDeSeleccionDeInspecciones(inspeccion)"><i class="glyphicon glyphicon-minus pointer pull-right"></i></span>
            <span *ngIf="!(accion== 'editar' || accion== 'procesar') && !(inspeccion.estado=='COMPLETADA') " routerLink="/inspeccion/entrada/{{inspeccion.Valor | pemarsaStringFormat:Proceso}}/{{Proceso.Guid}}/{{PiezaId}}/ver"><i class="glyphicon glyphicon-eye-open pointer pull-right"></i></span>
            <span *ngIf="!(accion== 'ver' || accion== 'procesar') && !(inspeccion.estado=='COMPLETADA')" routerLink="/inspeccion/entrada/{{inspeccion.Valor | pemarsaStringFormat:Proceso}}/{{Proceso.Guid}}/{{PiezaId}}/editar"><i class="glyphicon glyphicon-pencil pointer pull-right"> </i></span>
            <span *ngIf="!(accion== 'ver' || accion== 'editar' || accion== 'procesar'  ) && !(inspeccion.estado=='COMPLETADA')" routerLink="/inspeccion/entrada/{{inspeccion.Valor | pemarsaStringFormat:Proceso}}/{{Proceso.Guid}}/{{PiezaId}}/procesar"><i class="glyphicon glyphicon-wrench pointer pull-right"></i></span>
          </p>
        </div>
      </div>
    </div>
  </div>



  <div class="form-group row" >
    <div class=" col-md-3 col-md-offset-3">
      <app-sugerir-proceso *ngIf="inspeccionesTerminada"
                           [accion]="accion"
                           (click)="confirmarParams('Seleccione siguiente proceso sugerido', '¿Desea sugerir el proceso a ' + accion + '?', true, Proceso)"
                           (confir)="responseSugerenciaProceso($event)"></app-sugerir-proceso>
      <button *ngIf="inspeccionesEnProceso" (click)="procesar();">procesar</button>
    </div>

  </div>


</div>
