<div class="container">

  <fieldset>
    <legend>

      <b>Visual dimensional</b>

    </legend>
  </fieldset>

  <div class="col-md-11 contenido-interno">
    <form [formGroup]="formInpeccionVisualDimensional">

      <div class="form-group row">
        <label class="col-md-2 col-form-label " id="corre">
          * Visual:
        </label>

        <div class="col-md-5">
          <div *ngFor="let adjunto of inspeccion.InspeccionFotos">
            <div class="form-group row">
              <div class="col-md-12">
                <p class="form-control">
                  {{adjunto.DocumentoAdjunto.NombreArchivo}}
                  <i (click)="eliminarAdjunto(anexo)" class="glyphicon glyphicon-minus pointer pull-right"></i>
                  <a href="{{adjunto.DocumentoAdjunto.Ruta}}" class="pull-right">
                    <i class="glyphicon glyphicon-download"></i>
                  </a>
                </p>
              </div>
            </div>
          </div>
        </div>

        <div class="col-md-auto image-upload">
          <label for="file-input">
            <span class="badge badge-danger  pointer" validacion [validaciones]="['requerido']"> {{DocumetosRestantes}} <i class="glyphicon glyphicon-paperclip"></i></span>
          </label>

          <input id="file-input" formControlName="InspeccionFotos"  validacion [validaciones]="['requerido']" (change)="addFile($event)" required type="file" multiple />
        </div>
      </div>


      <div class="form-group row">
        <label class="col-md-2 control-label" id="corre">* Observacion: </label>
        <div class="col-md-9 ">
          <textarea formControlName="Observaciones" validacion [validaciones]="['requerido']" required class="form-control"></textarea>
        </div>
      </div>



      <p class="col-md-2 " id="corre">Trazabilidad: </p>
      <div class="form-group row">
        <label class="col-md-2 control-label" id="corre">* Intensidad de luz blanca: </label>
        <div class="col-md-7 ">
          <input formControlName="IntensidadLuzBlanca" validacion [validaciones]="['requerido']" required type="number" class="form-control" />
        </div>
      </div>

      <p class="col-md-2 " id="corre">Dimensional: </p>
      <br />
      <hr style="    border-top: 1px solid #7c7373;" />






      <div *ngIf="formInpeccionVisualDimensional.get('Conexiones').controls"
           formArrayName="Conexiones" class="form-group">
        <div class="row col-md-offset-2">

          <div *ngFor="let conexiones of formInpeccionVisualDimensional.get('Conexiones').controls; let i = index;" class=" col-md-3 ">
            <div [formGroupName]="i" class="row">
              <div *ngIf="false" class="col-md-auto">
                <input formControlName="NumeroConexion" validacion [validaciones]="['requerido']" [(ngModel)]="test" class="form-control " />
              </div>
              <div class="col-md-auto">
                <label class="control-label" id="corre">* Conexión {{i+1}} </label>
                <select formControlName="ConexionId" validacion [validaciones]="['requerido']" class="form-control form-control-lg">
                  <option value="0">Seleccione</option>
                  <option *ngFor="let Conexion of Conexiones" [value]="Conexion.Id">{{Conexion.Valor}}</option>
                </select>
              </div>
              <div class="col-md-auto">
                <label class="control-label" id="corre">* Tipo {{i+1}} </label>
                <select formControlName="TipoConexionId" validacion [validaciones]="['requerido']" class="form-control form-control-lg">
                  <option value="0">Seleccione</option>
                  <option *ngFor="let TipoConexion of TiposConexion" [value]="TipoConexion.Id">{{TipoConexion.Valor}}</option>
                </select>
              </div>
              <div class="col-md-9">
                <label class="control-label" id="corre">*Estado {{i+1}} </label>
                <select formControlName="EstadoId" validacion [validaciones]="['requerido']" class="form-control form-control-lg">
                  <option value="0">Seleccione</option>
                  <option *ngFor="let EstadoConexion of EstadosConexion | filterEstadoConexionPorConexion:conexiones.controls.ConexionId.value " [value]="EstadoConexion.Id">{{EstadoConexion.Valor}}</option>
                </select>

              </div>
              <div class="col-md-auto">
                <label class="control-label" id="corre">*Observacion {{i+1}} </label>
                <textarea formControlName="Observaciones" validacion [validaciones]="['requerido']" required class="form-control"></textarea>
              </div>
            </div>
          </div>



        </div>
      </div>







      <p class="col-md-2 " id="corre">Trazabilidad: </p>
      <div class="form-group row">
        <label class="col-md-2 control-label" id="corre">* Equipo medición usuado </label>
        <div class="col-md-7 ">

          <input type="text"
                 [disabled]="EquiposMedicionUsado.length>0 "
                 class="form-control"
                 [ngbTypeahead]="search"
                 [resultFormatter]="ValorMostrar"
                 [inputFormatter]="ValorFiltrar"
                 (selectItem)="selectItem($event)"
                 validacion [validaciones]="['requerido']"
                 formControlName="InspeccionEquipoUtilizado" />

        </div>
      </div>



      <div class="form-group row">

        <div class="col-md-offset-2 col-md-8">
          <div *ngIf="inspeccion.InspeccionEquipoUtilizado.length >0">
            <span *ngFor="let equipo of inspeccion.InspeccionEquipoUtilizado" class="col-md-2 badge badge-secondary aliniar-text">
              {{equipo.EquipoUtilizado.Valor}}
              <i (click)="removerDeElementosSeleccionado(equipo.EquipoUtilizado)" class="glyphicon glyphicon-remove btn-xs pull-right btn btn-danger"></i>
            </span>
          </div>
        </div>

      </div>

      <!--<div class="form-group  row">

    <div class="col-md-offset-3 ">
      <label class=" control-label" id="corre">Inspección dimecional de cuerpo  </label>
      <input class="form-control" />
    </div>

  </div>-->


      <div class="form-group row">
        <div class="col-md-3 col-md-offset-3 ">
          <button class="btn" (click)="procesar()">Proceosar y continuar</button>
        </div>
      </div>



    </form>



  </div>

</div>
