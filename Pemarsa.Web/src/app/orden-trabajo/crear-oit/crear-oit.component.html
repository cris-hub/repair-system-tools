<div *ngIf="!loading">
  <div class="container">
    <div class="row">
      <div class="col-md-11" style="background-color: rgba(36, 99, 194, .9);color: #ffffff;">
        <div class="">
          <div class="row">
            <div class="col-md-12" style="font-family: OpenSans-Bold;font-size: 15px;font-weight: 200; text-align: center;">
              <h3>{{accionRealizarTituloPagina}}</h3>
            </div>
           
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-11 contenido-interno">
      <form [formGroup]="formularioOrdenTrabajo">

        <fieldset>
          <legend>
            <b> Número de OIT:​ {{ordenTrabajo.Id}}</b>
            <i  (click)="historial(ordenTrabajo.Guid)" data-toggle="modal" data-target="#historialModal" class="glyphicon glyphicon-list-alt pointer"></i>
            <b class="pull-right">{{ordenTrabajo.FechaRegistro | date:'medium'}}</b>
          </legend>
      
        </fieldset>


        <div class="row">

          <div class="col-md-6">
            <label class="control-label">Responsable:</label>
            <p *ngIf="ordenTrabajo.Responsable">{{ordenTrabajo.Responsable.Valor}}</p>
          </div>

          <div class="col-md-6">
            <div formGroupName="TipoServicio" class="form-group">
              <label class="control-label">tipoServicio:</label>
              <div class="controls">
                <select formControlName="Id" class=" form-control-lg form-control select">
                  <option *ngFor="let tipoServicio of parametrosTipoServicio.Catalogos" value="{{tipoServicio.Id}}">{{tipoServicio.Valor}}</option>
                </select>
              </div>
            </div>
          </div>

        </div>








        <!--<div class="form-group row">
          <label class="col-md-2 col-form-label" id="corre">
            <span>*</span>
            Adjuntar plano:
          </label>
          <div class="col-md-2">
            <input type="file" (change)="addFile($event)" class="form-control-file" multiple>
          </div>
          <div class="col-md-5 col-md-offset-2">
            <div class="panel panel-default">
              <div class="panel-heading">
                <a data-toggle="collapse" data-parent="#accordion" href="#archivos">Archivos</a>
                <span class="pull-right panel-collapse-clickable" data-toggle="collapse" data-parent="#accordion" href="#archivos">
                  <i class="glyphicon glyphicon-chevron-down"></i>
                </span>
              </div>
              <div>
              </div>
              <div id="archivos" class="panel-collapse panel-collapse collapse">
                <div class="panel-body">
                  <ul>
                     <li *ngFor="let plano of planos">
                      <a>{{plano.NombreArchivo}}</a>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>-->



        <div class="row">

          <div class="col-md-6">
            <div class="form-group">
              <label class="control-label"> cliente::</label>
              <div class="controls">
                <input type="text" class="form-control" (ngModelChange)="consultarClientes()" [(ngModel)]="Cliente" [ngbTypeahead]="buscarConcidencia"
                       [resultFormatter]="formatoValorMostrar" [inputFormatter]="formatoValorMostrar" (selectItem)="cambioItemEvent($event)"
                       formControlName="Cliente" />
              </div>
            </div>
          </div>

          <div class="col-md-6">
            <div class="form-group">
              <label class="control-label">Linea cliente::</label>
              <div class="controls">
                <input type="text" class="form-control" (ngModelChange)="consultarLineasCliente()" [(ngModel)]="Linea" [ngbTypeahead]="buscarConcidenciaLinea"
                       [resultFormatter]="formatoValorMostrarLinea" [inputFormatter]="formatoValorMostrarLinea" formControlName="Linea" />
              </div>
            </div>
          </div>

        </div>

        <div class="row">

          <div class="col-md-6">
            <div class="form-group">
              <label class="control-label">herramienta:</label>
              <div class="controls">
                <p-autoComplete [(ngModel)]="herramienta" onDropdownClick="buscarConcidenciaHerramienta($event)" [dropdown]="true"
                                placeholder="herramienta" [suggestions]="herraminetasview" formControlName="Herramienta" field="Nombre"
                                (completeMethod)="buscarConcidenciaHerramienta($event)">
                </p-autoComplete>
              </div>
            </div>

          </div>

          <div class="col-md-6">
            <div formGroupName="TamanoHerramienta" class="form-group">
              <label *ngIf="herramienta">
                Herramienta tamaño
                <select formControlName="Id" class=" form-control-lg form-control select">
                  <option *ngFor="let tamano of herramienta.TamanosHerramienta" value="{{tamano.Id}}">{{tamano.Tamano}}</option>
                </select>
              </label>
            </div>
          </div>


        </div>




        <div class="row">



          <div class="col-md-12">
            <div *ngIf="herramienta.Materiales" formGroupName="Material" class="form-group">


              <label *ngIf="herramienta.Materiales">
                Material
                <select formControlName="Id" class=" form-control-lg select" [(ngModel)]="materialId" (change)="herramientaValor($event)">
                  <option *ngFor="let Material of herramienta.Materiales" [value]="Material.Id">{{Material.Material.Valor}}</option>
                </select>
              </label>

            </div>
          </div>
        </div>



        <div class="row">

          <div class="col-md-6">

            <div class="form-group">
              <label class="control-label">SerialHerramienta:</label>
              <div class="controls">
                <input formControlName="SerialHerramienta" type="text" class="form-control col-md-4">
                <!--<p class="help-block">Responsable de la OIT</p>-->
              </div>
            </div>
          </div>

          <div class="col-md-6">
            <div class="form-group">
              <label class="control-label">SerialMaterial:</label>
              <div class="controls">
                <input formControlName="SerialMaterial" type="text" class="form-control col-md-4">
                <!--<p class="help-block">Responsable de la OIT</p>-->
              </div>
            </div>
          </div>


        </div>






        <div class="row">
          <div class="col-md-6">
            <div class="form-group">
              <label class="control-label">Cantidad:</label>
              <div class="controls">
                <input formControlName="Cantidad" type="text" class="form-control">
                <!--<p class="help-block">Responsable de la OIT</p>-->
              </div>
            </div>
          </div>

          <div class="col-md-6">
            <div class="form-group">
              <label class="control-label">CantidadInspeccionar:</label>
              <div class="controls">
                <input formControlName="CantidadInspeccionar" type="text" class="form-control ">
                <!--<p class="help-block">Responsable de la OIT</p>-->
              </div>
            </div>
          </div>
        </div>












        <div class="row">
          <div class="col-md-6">
            <div class="form-group">
              <label class="control-label">W.O:</label>
              <div class="controls">
                <input formControlName="OrdenCompra" type="text" class="form-control ">
                <p class="help-block">Orden Compra</p>
              </div>
            </div>
          </div>

          <div class="col-md-6">
            <div class="form-group">
              <label class="control-label">RemisionCliente:</label>
              <div class="controls">
                <input formControlName="RemisionCliente" type="text" class="form-control col-md-4">
                <!--<p class="help-block">Responsable de la OIT</p>-->
              </div>
            </div>
          </div>
        </div>



        <div class="row">

          <div class="col-md-6">
            <div class="form-group">
              <label class="control-label">DetallesSolicitud:</label>

              <div class="controls">
                <textarea formControlName="DetallesSolicitud" class="form-control"></textarea>

                <!--<p class="help-block">Responsable de la OIT</p>-->
              </div>
            </div>
          </div>

        </div>






        <div class="form-group row">
          <div class="col-md-12">
            <div class="col-md-2 col-md-offset-4 text-right">
              <button [routerLink]="['/oit']" type="button" class="btn btn-md">Regresar</button>
            </div>
            <div *ngIf="!esVer" class="col-md-5">
              <button type="submit" (click)="enviar(formularioOrdenTrabajo.value);" class="btn btn-primary btn-md">{{accionRealizarTituloPagina}}</button>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>

<div *ngIf="esVer" class="modal fade" id="historialModal" tabindex="-1" role="dialog" aria-labelledby="historialModallabel"
     aria-hidden="true">
  <app-historial-modificaciones [guidProceso]="oit"></app-historial-modificaciones>
  </div>
